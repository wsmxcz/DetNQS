name: detnqs
channels:
  - nvidia
  - conda-forge
channel_priority: strict

dependencies:
  # --- Core ---
  - python=3.12
  - pip

  # --- BuildBuild toolchain ---
  - gxx=13.1.0
  - gcc=13.1.0

  - cmake=3.28
  - pkg-config
  - nanobind>=2.8
  - scikit-build-core>=0.10
  - eigen
  - openmp
  - catch2

  # --- CUDA Toolkit (complete toolchain: nvcc + nvvm + cicc etc.) ---
  # Pin to 12.8 for RTX 50 (Blackwell) + A100/H100 compatibility
  - cuda=12.8
  
  # --- Python numerics / dev ---
  - numpy>=2.1
  - scipy>=1.14
  - pytest
  - pytest-benchmark
  - ipykernel
  - matplotlib
  - pandas

  # --- JAX / ML stack via pip (newer than conda-forge, and CUDA deps handled) ---
  - pip:
      - "jax[cuda12-local]>=0.8.1"
      - "flax>=0.12"
      - "optax>=0.2"